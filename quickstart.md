Что представляет собой разработка под эфир, с точки зрения "рутины".
По сути это как если у тебя есть какая то странная бд и специальная либа для запросов.
Так же внести в эту БД свой код это несколько больший хасл, чем написать хранимку для постгри, например.
Репа представляет собой форкнутый
https://github.com/owanhunte/ethereum-solidity-course-updated-code
для курса:
https://www.udemy.com/course/ethereum-and-solidity-the-complete-developers-guide/


Итак по шагам, что нужно сделать:
# METAMASK
Тебе нужен метамаск с каким то количеством тестового эфира.
-Устанавливаешь метамаск, как расширение хрома. Сохрани свою фразу где нибудь.
Из этой фразы потом генерируются новые аккаунты. 
-Тебе нужен тестовый эфир. Идешь сюда: https://faucets.chain.link/rinkeby, вбиваешь аддресс своего аккаунта и тебе
упадет 0.1 тестовый эфир.

# Часть 1. Inbox
Теперь начнем разработку. В разработке под эфир есть 4 главных сущности.
1. Библиотека web3.js. Это js либа, которой можно взаимодействовать с эфиром. Делать транзакции, запросы итд.
2. Solidity. Собственно язык для смарт контрактов.
3. https://remix.ethereum.org/ (далее Remix) онлайн ide для Solidity, где можно эффективно дебажить смарт контракты.
Как я понял, они обычно не превышают нескольких сотен строчек.
4. https://etherscan.io/ сканер, где можно реально чекнуть свои аккаунты, контракты и транзакции.

Для работы всего этого добра нужна нода. Нудно установить node.js, это по сути как CPython для js.
Чтобы дальнейшие шаги работали, надо в папке Inbox сделать npm install.

## Написание и дебаг solidity.
Работа со смарт контрактом выглядит следующим образом.
Его надо написать. У Clion есть расширение для Solidity, думаю есть и у Pycharm. 
Возьми inbox/contracts/Inbox.sol скопипасть его в Remix скомпилируй по mouse2 (кнопка Compile).
Теперь поиграйся с ним, подебаж. Ключевая штука, что функция дергается только на транзакцию (пока не денежную)
В дебагере увидишь стэк, локальные переменные все как обычно.

## Юнит тест
Теперь попробуем написать юнит-тест. inbox/test/Inbox.test.js
Чтобы понять детали, читай комментарии, НО ключевой takeaway, это что тест полностью повторяет процесс "боевого" взаимодействия с контрактом.
Он: компилится -> деплоится -> дергается методами web3. Деплоится он в mock-сеть ganache.
Чтобы запустить надо сделать в папке inbox "npm install". 
запустить тест: "npm run test".
Так же посмотри скрипт compile.js, он довольно прост. Подобная структура проекта будет повторяться из раза в раз.

## Деплой на реальный чейн
inbox/deploy.js
Теперь нужно задеплоить на реальный чейн. Мы везде будем юзать rinkeby.
Чтобы задеплоить нужна какая то реальная нода. Для того чтобы получить к ней доступ идем в:
https://infura.io/ и регистрируемся.
Там потом после регистрации создаем проект CREATE NEW PROJECT большая оранжевая кнопка и выбираем Etherium.
Теперь у тебя будет проект, в нем будет раздел ENDPOINTS с выпадающим списком. Оттуда выбираешь Rinkeby.
https://mainnet.infura.io/v3/... будет че то типо такого, это и есть твой endpoint.
Чтобы задеплоить в deploy.js просто меняешь HDWalletProvider phrase и providerOrUrl на свои.
Когда ты успешно задеплоишь, чекни аддресс контракта тут: https://rinkeby.etherscan.io/

В целом это весь флоу работы как я понял. Остается просто глубже погружаться в solidity и web3.js


# Часть 2. Lottery.
Теперь чуть более сложный контракт. Код контракта достаточно прост, разберешься. Смысл что "менеджер" создает контракт-лотерею,
в нее кидают кэш чуваки и потом псевдорандомом выбирается побидитель.
Флоу абсолютно тот же.
Написал, скопипастил в Remix, задебажил, юнит-тест, деплой в реальную сеть. Только теперь я еще добавил скрипт для 
игры по реальной сети "play_lottery.js"
Поиграйся с контрактом в Remix. Там есть тупой момент, что когда дергаешь функцию "enter" колво эфира надо указать сверху под
надписью "VALUE".
Так же важный момент. В play_lottery.js есть огромная простыня "lottery_abi" эту штуку я скопипастил с Remix
там после компиляции есть artifacts/Lottery_metadata.json, а в ней abi секция, думаю можно это автоматизировать легко.

Суть скрипта в том что можно поиграть в лотерею со своих акков, и посмотреть на транзакции в сканере.
